#!/bin/bash

if [[ -z "$SECRET_DIR" ]]; then
    SECRET_DIR=$HOME/.secrets
fi

slug="${1:-}"
if [[ ! "${slug:-}" ]]; then
    slug=$(modal -lines 0)
fi

if [[ ! "${slug:-}" ]]; then
    echo "slug can't be empty"
    exit 1
fi

pwgen 10 1 \
    | xclip -f \
    | {
        cd ~/.secrets

        carcosa -Ac "passwords/$1"
    }
