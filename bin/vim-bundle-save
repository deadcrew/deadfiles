#!/bin/bash

exec >/dev/null 2>&1

# PlugSnapshot will remove (stupid bitch) and create new snapshot file, but I
# need to save symlink to dotfiles, so create temporary file and write contents
# to versions.vim

bundle=$(mktemp -u)
trap "rm $bundle" EXIT

vim "+PlugSnapshot $bundle" "+qall"

# remove 'generated by' bullshit
grep -P "let g:plugs" $bundle > ~/.vim/bundle/versions.vim
